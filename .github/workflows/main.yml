name: CI Pipeline

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Display project structure
      run: |
        echo "=== Project Structure ==="
        ls -la
        echo ""
        echo "=== File Details ==="
        find . -type f -name "*.py" -o -name "*.java" -o -name "*.js" -o -name "*.go" -o -name "*.rs" -o -name "*.php" | head -20
        
    - name: Run tests if test script exists
      run: |
        if [ -f "run_tests.sh" ]; then
          echo "Found run_tests.sh - making executable and running..."
          chmod +x run_tests.sh
          ./run_tests.sh
        else
          echo "No run_tests.sh found - this is OK"
        fi
